<template>
    <div if:true={isLoaded} class="cstm-spinner">
		<lightning-spinner alternative-text="Loading..."></lightning-spinner>
	</div>
    <div class="slds-box slds-theme_default">
        <div class="slds-m-left_medium">
            <h1 >Lead Record Insert Table</h1>
        </div>
        <div class="slds-m-vertical_small slds-form-element buttons slds-m-right_x-small slds-clearfix">
            <lightning-button label="Add Row" title="Add Row" icon-name="utility:add" onclick={addRow} class="slds-m-right_x-small medium slds-float_right"></lightning-button>
        </div>
        <div class="slds-m-around_medium ">
            <div class="slds-table slds-table_cell-buffer slds-table_bordered slds-box">
                    <table class="slds-table slds-table_bordered " >
                        <thead>
                            <tr>
                                <th>  #</th>
                                <th>  First Name</th>
                                <th>  Last Name</th>
                                <th>  Company</th>
                                <th>  Email</th>
                                <th>  Lead Status</th>
                                <th>  Date Record Insert</th>
                            </tr>
                        </thead>
                        <tbody>
                            <template for:each={LeadDataInsertList} for:item="lead" for:index="index">
                                <tr key={lead.num} id={lead.num}>
                                    <td>{index}</td>
                                    <td>
                                        <lightning-input data-id ={index} type="text" label="First Name" value={lead.FirstName} onchange={handaleFirstNameChange} variant="label-hidden" ></lightning-input>
                                    </td>
                                    <td>
                                        <lightning-input data-id={index} type="text" label="Last Name" value={lead.LastName} onchange={handaleLastNameChange} variant="label-hidden"></lightning-input>
                                    </td>
                                    <td>
                                        <lightning-input data-id={index} type="text" label="Company" value={lead.Company} onchange={handaleCompanyChange} variant="label-hidden"></lightning-input>
                                    </td>
                                    <td>
                                        <lightning-input data-id={index} type="email" label="Email" value={lead.Email} onchange={handaleEmailChange} variant="label-hidden"></lightning-input>
                                    </td>
                                    <td>
                                        <lightning-combobox
                                                data-id={index}
                                                name="Lead Status"
                                                variant="label-hidden"
                                                value={lead.Status}
                                                placeholder="lead status"
                                                options={getleadStatusOptions}
                                                onchange = {handleStatusChange}
                                                required
                                                ></lightning-combobox>
                                    </td>
                                    <td>
                                        <lightning-input data-id={index} type="date" label="Date Record insert" value={lead.Date_Record_Insert__c} onchange={handaleDateRecordChange}  variant="label-hidden"></lightning-input>
                                    </td>
                                    <td>
                                        <lightning-button-icon data-id={index} icon-name="utility:delete" variant="container" alternative-text="Delete" onclick={removeRow} class="slds-m-left_xx-small" title="Delete"></lightning-button-icon>
                                    </td>

                                </tr>
                            </template>
                        </tbody>
                    </table>
                </div>
                <div class="slds-m-vertical_large slds-text-align_center slds-form-element buttons">
                    <lightning-button variant="brand" label="Save" title="Lead Insert" onclick={handleSaveClick} class="slds-m-left_x-small"></lightning-button>
                    <lightning-button variant="destructive" label="Cancel" title="Lead Insert" onclick={handleCancelClick} class="slds-m-left_x-small"></lightning-button>
                </div>

            <div class="slds-card__body slds-box slds-box_small ">

                <lightning-datatable key-field="Id" data={leadArray} columns={columns} min-column-width="200"
                    onrowaction={handleRowAction}>
                </lightning-datatable>

            </div>
        </div>
    </div>
</template>



<!-- <div class="slds-media__body">
            <h2>
                <span> {labelContact} records ({CountRecContact})</span>
            </h2>
        </div> -->
<!-- <lightning-input type="search" onchange={handleKeyChange} class="slds-m-bottom_small" label="Search" value={searchKey}></lightning-input> -->
<!-- <div class="slds-m-bottom_small slds-size_1-of-7">
    <lightning-combobox
        name="object"
        variant="label-hidden"
        value={pagesize}
        placeholder="Record Size"
        options={getRecordSizeList}
        onchange={handleRecordSizeChange} ></lightning-combobox>
</div> -->
<!-- <lightning-layout horizontal-align="space" class="slds-m-around_medium">
    <lightning-layout-item flexibility="auto">
        <lightning-button label="Previous" icon-name="utility:chevronleft" onclick={previousHandler}>
        </lightning-button>
    </lightning-layout-item>
    <lightning-layout-item flexibility="auto"> Page {page} of {totalPage} </lightning-layout-item>
    <lightning-layout-item flexibility="auto">
        <lightning-button label="Next" icon-name="utility:chevronright" icon-position="right"
            onclick={nextHandler}></lightning-button>
    </lightning-layout-item>
</lightning-layout> -->